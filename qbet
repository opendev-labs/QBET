#!/usr/bin/env bash

# QBET Sovereign Launcher
# Governed by opendev-labs

# Determine the directory of this script
SOURCE="${BASH_SOURCE[0]}"
while [ -h "$SOURCE" ]; do
  DIR="$( cd -P "$( dirname "$SOURCE" )" >/dev/null 2>&1 && pwd )"
  SOURCE="$(readlink "$SOURCE")"
  [[ $SOURCE != /* ]] && SOURCE="$DIR/$SOURCE"
done
DIR="$( cd -P "$( dirname "$SOURCE" )" >/dev/null 2>&1 && pwd )"

# Path to the internal interpreter entry
INTERPRETER="$DIR/src/main.py"

# Ensure the internal structure is valid
if [ ! -f "$INTERPRETER" ]; then
    echo "‚ùå QBET Error: Internal runtime core not found."
    exit 1
fi

# Execute the interpreter via the host VM (Python)
# We use -u for unbuffered output and hide the host execution details
export PYTHONPATH="$DIR/src:$PYTHONPATH"
exec python3 "$INTERPRETER" "$@"
